{"version":3,"sources":["webpack:///webpack/bootstrap 57d209a0bf8a55007301","webpack:///./src/main/createFileManager.js","webpack:///./src/main/createMainWindow.js","webpack:///./src/main/createPDFWindow.js","webpack:///./src/main/setAppMenu.js","webpack:///./src/main/showOpenFileDialog.js","webpack:///./src/main/showSaveAsNewFileDialog.js","webpack:///external \"electron\"","webpack:///external \"fs\"","webpack:///./src/main/index.js","webpack:///external \"events\"","webpack:///./src/main/showExportPDFDialog.js"],"names":["FileManager","constructor","filePath","saveFile","text","Promise","resolve","fs","writeFileSync","readFile","readFileSync","overwriteFile","writePdf","pdf","createFileManager","MainWindow","window","width","height","loadURL","__dirname","on","requestText","webContents","send","ipcMain","once","_e","sendText","createMainWindow","PDFWindow","show","e","returnValue","emit","generatePDF","reject","printToPDF","error","data","close","createPDFWindow","contents","fileManager","setAppMenu","options","template","label","submenu","accelerator","click","openFile","saveAsNewFile","exportPDF","role","BrowserWindow","getFocusedWindow","toggleDevTools","process","platform","unshift","app","quit","Menu","setApplicationMenu","buildFromTemplate","showOpenFileDialog","files","dialog","showOpenDialog","title","properties","filters","name","extensions","length","showSaveAsNewFileDialog","file","showSaveDialog","mainWindow","then","catch","console","log","all","showExportPDFDialog","pdfWindow","hasVisibleWindows"],"mappings":"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","file":"dist/main/index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 197);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 57d209a0bf8a55007301","import fs from \"fs\";\n\nclass FileManager {\n  constructor() {\n    this.filePath = \"\";\n  }\n\n  // TODO: 同期にする方がわかりやすいという指摘に対応する\n  saveFile(filePath, text) {\n    return new Promise((resolve) => {\n      fs.writeFileSync(filePath, text);\n      this.filePath = filePath;\n      resolve();\n    });\n  }\n\n  readFile(filePath) {\n    return new Promise((resolve) => {\n      const text = fs.readFileSync(filePath, \"utf8\");\n      this.filePath = filePath;\n      resolve(text);\n    });\n  }\n\n  overwriteFile(text) {\n    // return new Promise((resolve) => {\n      return this.saveFile(this.filePath, text);\n      // .then(resolve());\n    // });\n  }\n\n  writePdf(filePath, pdf) {\n    return new Promise((resolve) => {\n      fs.writeFileSync(filePath, pdf);\n      resolve();\n    });\n  }\n}\n\nfunction createFileManager() {\n  return new FileManager();\n}\n\nexport default createFileManager;\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/createFileManager.js","import { BrowserWindow, ipcMain } from \"electron\";\r\n\r\nclass MainWindow {\r\n    constructor() {\r\n        this.window = new BrowserWindow({ width: 800, height: 600 });\r\n        this.window.loadURL(`file://${__dirname}/../../index.html`);\r\n        this.window.on(\"closed\", () => {\r\n            this.window = null;\r\n        });\r\n    }\r\n\r\n    requestText() {\r\n        return new Promise((resolve) => {\r\n            this.window.webContents.send(\"REQUEST_TEXT\");\r\n            ipcMain.once(\"REPLY_TEXT\", (_e, text) => resolve(text));\r\n        });\r\n    }\r\n\r\n    sendText(text) {\r\n        this.window.webContents.send(\"SEND_TEXT\", text);\r\n    }\r\n}\r\n\r\nfunction createMainWindow() {\r\n    return new MainWindow();\r\n}\r\n\r\nexport default createMainWindow;\n\n\n// WEBPACK FOOTER //\n// ./src/main/createMainWindow.js","import { BrowserWindow } from \"electron\";\nimport { ipcMain } from \"electron\";\nimport EventEmitter from \"events\";\n\nclass PDFWindow extends EventEmitter {\n  constructor(text) {\n    super();\n    this.window = new BrowserWindow({ show: true });\n    this.window.loadURL(`file://${__dirname}/../../pdf.html`);\n    ipcMain.once(\"REQUEST_TEXT\", (e) => {\n      e.returnValue = text;\n    });\n    ipcMain.once(\"RENDERED_CONTENTS\", () => {\n      this.emit(\"RENDERED_CONTENTS\");\n    });\n  }\n\n  generatePDF() {\n    return new Promise((resolve, reject) => {\n      this.window.webContents.printToPDF({}, (error, data) => {\n        if (error) {\n          reject(error);\n        } else {\n          resolve(data);\n        }\n      });\n    });\n  }\n\n  close() {\n    this.window.close();\n    this.window.on(\"closed\", () => {\n      this.window = null;\n    });\n  }\n}\n\nfunction createPDFWindow(contents, fileManager) {\n  return new PDFWindow(contents, fileManager);\n}\n\nexport default createPDFWindow;\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/createPDFWindow.js","import { app, Menu, BrowserWindow } from \"electron\";\r\n\r\nfunction setAppMenu(options) {\r\n  const template = [\r\n    {\r\n      label: \"File\",\r\n      submenu: [\r\n        { label: \"Open\", accelerator: \"CmdOrCtrl+O\", click: () => options.openFile() },\r\n        { label: \"Save\", accelerator: \"CmdOrCtrl+S\", click: () => options.saveFile() },\r\n        { label: \"Save As...\", click: () => options.saveAsNewFile() },\r\n        { label: \"Export PDF\", click: () => options.exportPDF() }\r\n      ]\r\n    },\r\n    {\r\n      label: \"Edit\",\r\n      submenu: [\r\n        { label: \"Copy\", accelerator: \"CmdOrCtrl+C\", role: \"copy\" },\r\n        { label: \"Paste\", accelerator: \"CmdOrCtrl+V\", role: \"paste\" },\r\n        { label: \"Cut\", accelerator: \"CmdOrCtrl+X\", role: \"cut\" },\r\n        { label: \"Select All\", accelerator: \"CmdOrCtrl+A\", role: \"selectall\" }\r\n      ]\r\n    },\r\n    {\r\n      label: \"View\",\r\n      submenu: [\r\n        {\r\n          label: \"Toggle DevTools\",\r\n          accelerator: \"Alt+Command+I\",\r\n          click: () => BrowserWindow.getFocusedWindow().toggleDevTools()\r\n        }\r\n      ]\r\n    }\r\n  ];\r\n  if (process.platform === \"darwin\" ) {\r\n    template.unshift(\r\n      {\r\n        label: \"MarkdownEditor\",\r\n        submenu: [\r\n          { label: \"Quit\", accelerator: \"CmdOrCtrl+Q\", click: () => app.quit() }\r\n        ]\r\n      }\r\n    );\r\n  }\r\n  Menu.setApplicationMenu(Menu.buildFromTemplate(template));\r\n}\r\nexport default setAppMenu;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/setAppMenu.js","import { dialog } from \"electron\";\n\nfunction showOpenFileDialog() {\n  return new Promise((resolve, reject) => {\n    const files = dialog.showOpenDialog(\n      {\n        title: \"open\",\n        properties: [ \"openFile\" ],\n        filters: [\n          { name: \"markdown file\", extensions: [ \"md\" ] }\n        ]\n      }\n    );\n    \n    if (files && files.length > 0) {\n      resolve(files[0]);\n    } else {\n      reject();\n    }\n  });\n}\n\nexport default showOpenFileDialog;\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/showOpenFileDialog.js","import { dialog } from \"electron\";\n\nfunction showSaveAsNewFileDialog() {\n  return new Promise((resolve, reject) => {\n    const file = dialog.showSaveDialog(\n      {\n        title: \"save\",\n        filters: [ { name: \"markdown file\", extensions: [ \"md\" ] } ]\n      }\n    );\n    if (file) {\n      resolve(file);\n    } else {\n      reject();\n    }\n  });\n}\n\nexport default showSaveAsNewFileDialog;\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/showSaveAsNewFileDialog.js","module.exports = require(\"electron\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"electron\"\n// module id = 19\n// module chunks = 0 1 2","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 196\n// module chunks = 2","// Electronのモジュール\r\nimport { app } from \"electron\";\r\nimport createMainWindow from \"./createMainWindow\";\r\nimport setAppMenu from \"./setAppMenu\";\r\nimport showSaveAsNewFileDialog from \"./showSaveAsNewFileDialog\";\r\nimport createFileManager from \"./createFileManager\";\r\nimport showOpenFileDialog from \"./showOpenFileDialog\";\r\nimport createPDFWindow from \"./createPDFWindow\";\r\nimport showExportPDFDialog from \"./showExportPDFDialog\";\r\n\r\n// メインウィンドウはGCされないようにグローバル宣言\r\nlet mainWindow = null;\r\nlet fileManager = null;\r\n\r\nfunction openFile() {\r\n  showOpenFileDialog()\r\n    .then((filePath) => fileManager.readFile(filePath))\r\n    .then((text) => mainWindow.sendText(text))\r\n    .catch((error) => {\r\n      console.log(error);\r\n    });\r\n}\r\n\r\nfunction saveFile() {\r\n  if (!fileManager.filePath) {\r\n    saveAsNewFile();\r\n    return;\r\n  }\r\n  mainWindow.requestText()\r\n    .then((text) => fileManager.overwriteFile(text))\r\n    .catch((error) => {\r\n      console.log(error);\r\n    });\r\n}\r\n\r\nfunction saveAsNewFile() {\r\n  Promise.all([ showSaveAsNewFileDialog(), mainWindow.requestText() ])\r\n  .then(([filePath, text]) => fileManager.saveFile(filePath, text))\r\n  .catch((error) => {\r\n    console.log(error);\r\n  });\r\n}\r\n\r\nfunction exportPDF() {\r\n  Promise.all([ showExportPDFDialog(), mainWindow.requestText() ])\r\n    .then(([filePath, text]) => {\r\n      const pdfWindow = createPDFWindow(text);\r\n      pdfWindow.on(\"RENDERED_CONTENTS\", () => {\r\n        pdfWindow.generatePDF()\r\n          .then((pdf) => fileManager.writePdf(filePath, pdf))\r\n          .then(() => pdfWindow.close())\r\n          .catch((error) => {\r\n            console.log(error);\r\n            pdfWindow.close();\r\n          });\r\n      });\r\n    })\r\n    .catch((error) => {\r\n      console.log(error);\r\n    });\r\n}\r\n\r\n// Electronの初期化完了後に実行\r\napp.on('ready', () => {\r\n    // メイン画面の表示\r\n    mainWindow = createMainWindow();\r\n    fileManager = createFileManager();\r\n    const options = { openFile, saveFile, saveAsNewFile, exportPDF };\r\n    setAppMenu(options);\r\n  });\r\n\r\n// 全てのウィンドウが閉じたら終了\r\napp.on('window-all-closed', () => {\r\n  if (process.platform != 'darwin') {\r\n    app.quit();\r\n  }\r\n});\r\n\r\napp.on(\"activate\", (_e, hasVisibleWindows) => {\r\n    if (!hasVisibleWindows) {\r\n        mainWindow = createMainWindow();\r\n    }\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/main/index.js","module.exports = require(\"events\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"events\"\n// module id = 200\n// module chunks = 2","import { dialog } from \"electron\";\n\nfunction showExportPDFDialog () {\n  return new Promise((resolve, reject) => {\n    const file = dialog.showSaveDialog(\n      {\n        title: \"export as PDF\",\n        filters: [\n          {\n            name: \"pdf file\",\n            extensions: [ \"pdf\" ]\n          }\n        ]\n      }\n    );\n    if (file) {\n      resolve(file);\n    } else {\n      reject();\n    }\n  });\n}\n\nexport default showExportPDFDialog;\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/showExportPDFDialog.js"],"sourceRoot":""}